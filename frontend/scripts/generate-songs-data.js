const fs = require('fs');
const path = require('path');

// Path to the JSON file (which already contains the cover art)
const jsonPath = path.resolve(__dirname, '../../metadata_output.json');
const outputPath = path.resolve(__dirname, '../src/lib/songs-data.ts');

// Read and process the JSON file
function generateSongsDataFile() {
  try {
    // Read the JSON file that already contains cover art
    const fileContent = fs.readFileSync(jsonPath, 'utf-8');
    const songs = JSON.parse(fileContent);
    
    // Generate the TypeScript file
    const content = `// This file is auto-generated from the songs_data.json file
// Do not edit this file directly

export interface Song {
  id: string;
  title: string;
  artist: string;
  album: string;
  url: string;
}

export const songList: Song[] = ${JSON.stringify(songs, null, 2)};
`;

    fs.writeFileSync(outputPath, content, 'utf-8');
    console.log(`Generated songs data with ${songs.length} songs at ${outputPath}`);
  } catch (error) {
    console.error('Error generating songs data file:', error);
  }
}

// Execute the script
generateSongsDataFile();